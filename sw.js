self.addEventListener('install', function(event) {
  event.waitUntil(
    caches.open('v1').then(function(cache) {
      return cache.addAll([
'/HAG/',
'/HAG/ground.css',
'/HAG/ground.html',
'/HAG/ground.js',
'/HAG/home.css',
'/HAG/home.js',
'/HAG/horizontalNav.js',
'/HAG/http.json',
'/HAG/index.html',
'/HAG/levels.css',
'/HAG/levels.html',
'/HAG/README.md',
'/HAG/sky.css',
'/HAG/sky.html',
'/HAG/sky.js',
'/HAG/water.css',
'/HAG/water.html',
'/HAG/water.js',
'/HAG/div/div.css',
'/HAG/div/div.html',
'/HAG/div/div.js',
'/HAG/div/http.json',
'/HAG/div/images/bridge_blr.png',
'/HAG/div/images/bridge_lr.png',
'/HAG/div/images/bridge_tb.png',
'/HAG/div/images/bubble.svg',
'/HAG/div/images/cave.png',
'/HAG/div/images/character.png',
'/HAG/div/images/clouds.png',
'/HAG/div/images/cloudsV3.png',
'/HAG/div/images/cloud.svg',
'/HAG/div/images/crack.png',
'/HAG/div/images/desert.svg',
'/HAG/div/images/developing_intelligence.png',
'/HAG/div/images/dgrass.jpg',
'/HAG/div/images/diamond_map.png',
'/HAG/div/images/diamond.png',
'/HAG/div/images/dog.png',
'/HAG/div/images/dtree.png',
'/HAG/div/images/fhouse.png',
'/HAG/div/images/fire.svg',
'/HAG/div/images/flowers.png',
'/HAG/div/images/forester.png',
'/HAG/div/images/fountain.png',
'/HAG/div/images/frame.f23a6c88.js',
'/HAG/div/images/game.jpg',
'/HAG/div/images/gate.png',
'/HAG/div/images/glevels1.png',
'/HAG/div/images/grass.jpg',
'/HAG/div/images/grass.png',
'/HAG/div/images/grave.png',
'/HAG/div/images/ground.png',
'/HAG/div/images/ground.svg',
'/HAG/div/images/house.png',
'/HAG/div/images/human1.png',
'/HAG/div/images/human2.png',
'/HAG/div/images/human3.png',
'/HAG/div/images/human4.png',
'/HAG/div/images/human5.png',
'/HAG/div/images/human6.png',
'/HAG/div/images/iscroll.png',
'/HAG/div/images/levels_backround.jpg',
'/HAG/div/images/levels_backround.png',
'/HAG/div/images/levels.png',
'/HAG/div/images/levels.svg',
'/HAG/div/images/logo_text.svg',
'/HAG/div/images/logotextV1.svg',
'/HAG/div/images/logotextV2.svg',
'/HAG/div/images/logotextV3.svg',
'/HAG/div/images/logotextV4.svg',
'/HAG/div/images/logotextV5.svg',
'/HAG/div/images/logotextV6.svg',
'/HAG/div/images/logotextV7.svg',
'/HAG/div/images/logo_v1.svg',
'/HAG/div/images/logoV1.svg',
'/HAG/div/images/logo_v2.svg',
'/HAG/div/images/logoV2.svg',
'/HAG/div/images/mountain.png',
'/HAG/div/images/my_cursor.png',
'/HAG/div/images/points.png',
'/HAG/div/images/portal-background.png',
'/HAG/div/images/productive_struggle.png',
'/HAG/div/images/profile.png',
'/HAG/div/images/river_clb.png',
'/HAG/div/images/river_clt.png',
'/HAG/div/images/river_crb.png',
'/HAG/div/images/river_crt.png',
'/HAG/div/images/river_lr.png',
'/HAG/div/images/river.png',
'/HAG/div/images/river_tb.png',
'/HAG/div/images/river_t.png',
'/HAG/div/images/rocky.jpg',
'/HAG/div/images/scroll.png',
'/HAG/div/images/spider.png',
'/HAG/div/images/ss1.png',
'/HAG/div/images/ss2.png',
'/HAG/div/images/ss3.png',
'/HAG/div/images/ss4.png',
'/HAG/div/images/star.png',
'/HAG/div/images/stone.png',
'/HAG/div/images/terrain_b.png',
'/HAG/div/images/terrain_clb.png',
'/HAG/div/images/terrain_clt.png',
'/HAG/div/images/terrain_crb.png',
'/HAG/div/images/terrain_crt.png',
'/HAG/div/images/terrain_l.png',
'/HAG/div/images/terrain_lrbe.png',
'/HAG/div/images/terrain_lr.png',
'/HAG/div/images/terrain_lrte.png',
'/HAG/div/images/terrain.png',
'/HAG/div/images/terrain_r.png',
'/HAG/div/images/terrain_tble.png',
'/HAG/div/images/terrain_tb.png',
'/HAG/div/images/terrain_tbre.png',
'/HAG/div/images/terrain_t.png',
'/HAG/div/images/tree.png',
'/HAG/div/images/well.png',
'/HAG/div/images/whouse.png',
'/HAG/div/images/willow.png',
'/HAG/div/images/witch.png',
'/HAG/div/images/wolf.png',
'/HAG/div/images/wood.png',
'/HAG/div/images/levels/bubble.svg',
'/HAG/div/images/levels/cloud.svg',
'/HAG/div/images/levels/desert.svg',
'/HAG/div/images/levels/fire.svg',
'/HAG/div/images/levels/ground.svg',
'/HAG/images/blanc.png',
'/HAG/images/bridge_blr.png',
'/HAG/images/bridge_lr.png',
'/HAG/images/bridge_tb.png',
'/HAG/images/bubble1.svg',
'/HAG/images/bubble2.svg',
'/HAG/images/cave.png',
'/HAG/images/character.png',
'/HAG/images/clouds.png',
'/HAG/images/cloudsV3.png',
'/HAG/images/cloud.svg',
'/HAG/images/crack.png',
'/HAG/images/desert.svg',
'/HAG/images/developing_intelligence.png',
'/HAG/images/dgrass.jpg',
'/HAG/images/diamond_map.png',
'/HAG/images/diamond.png',
'/HAG/images/dog.png',
'/HAG/images/dtree.png',
'/HAG/images/fhouse.png',
'/HAG/images/fire.svg',
'/HAG/images/flowers.png',
'/HAG/images/forester.png',
'/HAG/images/fountain.png',
'/HAG/images/frame.f23a6c88.js',
'/HAG/images/game.jpg',
'/HAG/images/gate1.png',
'/HAG/images/gate2.png',
'/HAG/images/gate.png',
'/HAG/images/glevels1.png',
'/HAG/images/grass.jpg',
'/HAG/images/grass.png',
'/HAG/images/grave.png',
'/HAG/images/ground.png',
'/HAG/images/ground.svg',
'/HAG/images/house.png',
'/HAG/images/human1.png',
'/HAG/images/human2.png',
'/HAG/images/human3.png',
'/HAG/images/human4.png',
'/HAG/images/human5.png',
'/HAG/images/human6.png',
'/HAG/images/iscroll.png',
'/HAG/images/levels',
'/HAG/images/levels_backround.jpg',
'/HAG/images/levels_backround.png',
'/HAG/images/levels.png',
'/HAG/images/levels.svg',
'/HAG/images/logo_text.svg',
'/HAG/images/logotextV1.svg',
'/HAG/images/logotextV2.svg',
'/HAG/images/logotextV3.svg',
'/HAG/images/logotextV4.svg',
'/HAG/images/logotextV5.svg',
'/HAG/images/logotextV6.svg',
'/HAG/images/logotextV7.svg',
'/HAG/images/logo_v1.svg',
'/HAG/images/logoV1.svg',
'/HAG/images/logo_v2.svg',
'/HAG/images/logoV2.svg',
'/HAG/images/mountain.png',
'/HAG/images/my_cursor.png',
'/HAG/images/points.png',
'/HAG/images/portal-background.png',
'/HAG/images/productive_struggle.png',
'/HAG/images/profile.png',
'/HAG/images/river_clb.png',
'/HAG/images/river_clt.png',
'/HAG/images/river_crb.png',
'/HAG/images/river_crt.png',
'/HAG/images/river_lr.png',
'/HAG/images/river.png',
'/HAG/images/river_tb.png',
'/HAG/images/river_t.png',
'/HAG/images/rocky.jpg',
'/HAG/images/rocky_tree.png',
'/HAG/images/scroll.png',
'/HAG/images/spider.png',
'/HAG/images/ss1.png',
'/HAG/images/ss2.png',
'/HAG/images/ss3.png',
'/HAG/images/ss4.png',
'/HAG/images/star.png',
'/HAG/images/stone.png',
'/HAG/images/terrain_b.png',
'/HAG/images/terrain_clb.png',
'/HAG/images/terrain_clt.png',
'/HAG/images/terrain_crb.png',
'/HAG/images/terrain_crt.png',
'/HAG/images/terrain_l.png',
'/HAG/images/terrain_lrbe.png',
'/HAG/images/terrain_lr.png',
'/HAG/images/terrain_lrte.png',
'/HAG/images/terrain.png',
'/HAG/images/terrain_r.png',
'/HAG/images/terrain_tble.png',
'/HAG/images/terrain_tb.png',
'/HAG/images/terrain_tbre.png',
'/HAG/images/terrain_t.png',
'/HAG/images/test.svg',
'/HAG/images/tree.png',
'/HAG/images/well.png',
'/HAG/images/whouse.png',
'/HAG/images/willow1.png',
'/HAG/images/willow.png',
'/HAG/images/witch.png',
'/HAG/images/wolf.png',
'/HAG/images/wood.png',
'/HAG/images/levels/bubble.svg',
'/HAG/images/levels/cloud.svg',
'/HAG/images/levels/desert.svg',
'/HAG/images/levels/fire.svg',
'/HAG/images/levels/ground.svg',
'/HAG/sky_images/angel1.png',
'/HAG/sky_images/angel2.png',
'/HAG/sky_images/broken_portal.png',
'/HAG/sky_images/castle.png',
'/HAG/sky_images/character.png',
'/HAG/sky_images/cloud.png',
'/HAG/sky_images/clouds.jpg',
'/HAG/sky_images/clouds.png',
'/HAG/sky_images/diamond.png',
'/HAG/sky_images/floor.png',
'/HAG/sky_images/gate1.png',
'/HAG/sky_images/gate2.png',
'/HAG/sky_images/gate3.png',
'/HAG/sky_images/grass.png',
'/HAG/sky_images/ground.png',
'/HAG/sky_images/healed_sun.png',
'/HAG/sky_images/human1.png',
'/HAG/sky_images/human2.png',
'/HAG/sky_images/human3.png',
'/HAG/sky_images/key.png',
'/HAG/sky_images/mushroom.png',
'/HAG/sky_images/pegasus.png',
'/HAG/sky_images/pillar.png',
'/HAG/sky_images/pixie.png',
'/HAG/sky_images/portal.png',
'/HAG/sky_images/portal_to_earth.png',
'/HAG/sky_images/potion.png',
'/HAG/sky_images/ray.png',
'/HAG/sky_images/sick_sun.png',
'/HAG/sky_images/stone.png',
'/HAG/sky_images/sun.png',
'/HAG/sky_images/throne.png',
'/HAG/sky_images/wall.png',
'/HAG/water_images/character.png',
'/HAG/water_images/dark_voice.png',
'/HAG/water_images/diamond_map.png',
'/HAG/water_images/diamond.png',
'/HAG/water_images/food.png',
'/HAG/water_images/gate.png',
'/HAG/water_images/grass.jpg',
'/HAG/water_images/ground.png',
'/HAG/water_images/medusa1.png',
'/HAG/water_images/medusa2.png',
'/HAG/water_images/minotaur.png',
'/HAG/water_images/rat.png',
'/HAG/water_images/river.png',
'/HAG/water_images/serpent.png',
'/HAG/water_images/spikes.png',
'/HAG/water_images/stairs_to_heaven.png',
'/HAG/water_images/stone.png',
'/HAG/water_images/tree.png',
'/HAG/water_images/wall.png',
'/HAG/water_images/well.png',
'/HAG/water_images/well_stairs.png'
      ]);
    })
  );
});

self.addEventListener('fetch', function(event) {
  event.respondWith(caches.match(event.request).then(function(response) {
    // caches.match() always resolves
    // but in case of success response will have value
    if (response !== undefined) {
      return response;
    } else {
      return fetch(event.request).then(function (response) {
        // response may be used only once
        // we need to save clone to put one copy in cache
        // and serve second one
        let responseClone = response.clone();
        
        caches.open('v1').then(function (cache) {
          cache.put(event.request, responseClone);
        });
        return response;
      }).catch(function () {
        return caches.match('/HAG/');
      });
    }
  }));
});
